{"ast":null,"code":"import{letterArray}from\"../../../const\";import{useAppDispatch,useAppSelector}from\"../../../hooks/hooks\";import{changeChoosenCountry,removeChoosenCountry,setLetter}from\"../../../store/app-slice\";import{useGetCountriesNamesQuery}from\"../../../store/countries-api\";import{ReactComponent as MenuButtonClose}from'../../../assets/img/menu_button_close.svg';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const SelectedCountryInput=_ref=>{let{selectedCountry}=_ref;const dispatch=useAppDispatch();const choosenLetter=useAppSelector(state=>state.appSlice.choosenLetter);const{data:filteredCountries,isLoading}=useGetCountriesNamesQuery(choosenLetter);const handleSelectCountryInputClick=newCountry=>{const countriesToChange={currentCountry:selectedCountry,newCountry:newCountry};dispatch(changeChoosenCountry(countriesToChange));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"route__item-new \",children:[/*#__PURE__*/_jsx(\"h3\",{onClick:evt=>{var _evt$currentTarget$cl;console.log(evt.target);(_evt$currentTarget$cl=evt.currentTarget.closest('div'))===null||_evt$currentTarget$cl===void 0?void 0:_evt$currentTarget$cl.classList.toggle('active');// dispatch(setIsSelectCountryInputActive());\n},children:selectedCountry.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"route__countries-wrapper\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"route__letters-list\",children:letterArray.map((letter,index)=>{return/*#__PURE__*/_jsx(\"li\",{className:\"step__letter-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"step__letter-button \".concat(choosenLetter===letter?'active':''),type:\"button\",onClick:()=>dispatch(setLetter(letter)),children:letter})},index);})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"route__counties-list\",children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),filteredCountries===null||filteredCountries===void 0?void 0:filteredCountries.map(country=>{return/*#__PURE__*/_jsx(\"li\",{className:\"route__counties-item counties\",onClick:evt=>{var _evt$currentTarget$cl2;handleSelectCountryInputClick(country);(_evt$currentTarget$cl2=evt.currentTarget.closest('.step__input-container'))===null||_evt$currentTarget$cl2===void 0?void 0:_evt$currentTarget$cl2.classList.remove('active');},children:country.name},country.name);})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step__indicator\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"step__flag\",src:selectedCountry.flag,alt:\"country flag image\"}),/*#__PURE__*/_jsx(\"button\",{className:\"step__button\",type:\"button\",onClick:()=>dispatch(removeChoosenCountry(selectedCountry)),children:/*#__PURE__*/_jsx(MenuButtonClose,{})})]})]});};","map":{"version":3,"names":["letterArray","useAppDispatch","useAppSelector","changeChoosenCountry","removeChoosenCountry","setLetter","useGetCountriesNamesQuery","ReactComponent","MenuButtonClose","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SelectedCountryInput","_ref","selectedCountry","dispatch","choosenLetter","state","appSlice","data","filteredCountries","isLoading","handleSelectCountryInputClick","newCountry","countriesToChange","currentCountry","children","className","onClick","evt","_evt$currentTarget$cl","console","log","target","currentTarget","closest","classList","toggle","name","map","letter","index","concat","type","country","_evt$currentTarget$cl2","remove","src","flag","alt"],"sources":["C:/Стажировка/intern-pognali-2-6/my-app/src/components/blocks/selected-coutry-input/selected-country-input.tsx"],"sourcesContent":["import { letterArray } from \"../../../const\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../hooks/hooks\";\r\nimport { changeChoosenCountry, removeChoosenCountry, setLetter } from \"../../../store/app-slice\";\r\nimport { useGetCountriesNamesQuery } from \"../../../store/countries-api\";\r\nimport { CountriesToChange, Country } from \"../../../types\";\r\nimport { ReactComponent as MenuButtonClose } from '../../../assets/img/menu_button_close.svg';\r\n\r\n\r\ntype SelectedCoutriesInputProps = {\r\n    selectedCountry: Country;\r\n}\r\n\r\nexport const SelectedCountryInput = ({ selectedCountry }: SelectedCoutriesInputProps) => {\r\n    const dispatch = useAppDispatch();\r\n    const choosenLetter = useAppSelector(state => state.appSlice.choosenLetter);\r\n    const { data: filteredCountries, isLoading } = useGetCountriesNamesQuery(choosenLetter);\r\n    const handleSelectCountryInputClick = (newCountry: Country): void => {\r\n        const countriesToChange: CountriesToChange = {\r\n            currentCountry: selectedCountry,\r\n            newCountry: newCountry\r\n        };\r\n        dispatch(changeChoosenCountry(countriesToChange));\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={`route__item-new `}>\r\n                <h3\r\n                onClick={(evt) => {\r\n                    console.log(evt.target);\r\n                    evt.currentTarget.closest('div')?.classList.toggle('active');\r\n                    // dispatch(setIsSelectCountryInputActive());\r\n                }}\r\n                >\r\n                    {selectedCountry.name}\r\n                </h3>\r\n                <div className=\"route__countries-wrapper\">\r\n                    <ul className=\"route__letters-list\">\r\n                        {letterArray.map((letter: string, index: number) => {\r\n                            return (\r\n                                <li className=\"step__letter-item\" key={index}>\r\n                                    <button className={`step__letter-button ${choosenLetter === letter ? 'active' : ''}`}\r\n                                        type=\"button\"\r\n                                        onClick={() => dispatch(setLetter(letter))}>{letter}\r\n                                    </button>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                    <ul className=\"route__counties-list\">\r\n                        {isLoading && <div>Loading...</div>}\r\n                        {filteredCountries?.map((country: Country) => {\r\n                            return (\r\n                                <li className=\"route__counties-item counties\"\r\n                                    key={country.name}\r\n                                    onClick={(evt) => {\r\n                                        handleSelectCountryInputClick(country);\r\n                                        evt.currentTarget.closest('.step__input-container')?.classList.remove('active');\r\n                                    }}>{country.name}</li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            </div><div className=\"step__indicator\">\r\n                <img className=\"step__flag\" src={selectedCountry.flag} alt=\"country flag image\" />\r\n                <button className=\"step__button\" type=\"button\"\r\n                    onClick={() => dispatch(removeChoosenCountry(selectedCountry))}>\r\n                        <MenuButtonClose />\r\n                    </button>\r\n            </div>\r\n        </>\r\n    )\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}